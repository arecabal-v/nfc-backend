### Variables de entorno para REST Client
@baseUrl = http://localhost:3000/api/v1
@apiVersion = v1
@contentType = application/json

# Ejemplo de tokens JWT (reemplaza con tokens reales después del registro)
@accessToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ejemplo
@refreshToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ejemplo

### ========================================
### HEALTH ENDPOINTS
### ========================================

### Health Check
GET {{baseUrl}}/health
Content-Type: {{contentType}}

###

### ========================================
### AUTH ENDPOINTS
### ========================================

### Register User - Devuelve access y refresh tokens
POST {{baseUrl}}/auth/register
Content-Type: {{contentType}}

{
  "email": "usuario@ejemplo.com",
  "password": "miPassword123",
  "name": "Juan Pérez"
}

# Respuesta esperada:
# {
#   "message": "User registered successfully",
#   "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
#   "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
# }

###

### Register Another User for Testing
POST {{baseUrl}}/auth/register
Content-Type: {{contentType}}

{
  "email": "test@example.com",
  "password": "password123",
  "name": "Test User"
}

###

### Login User - Devuelve access y refresh tokens
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "usuario@ejemplo.com",
  "password": "miPassword123"
}

# Respuesta esperada:
# {
#   "message": "Login successful",
#   "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
#   "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
# }

###

### Login Another User for Testing
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "test@example.com",
  "password": "password123"
}

###

### Refresh Token - Obtiene nuevos tokens usando el refresh token
POST {{baseUrl}}/auth/refresh
Content-Type: {{contentType}}
Authorization: Bearer {{refreshToken}}

# Respuesta esperada:
# {
#   "message": "Tokens refreshed successfully",
#   "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
#   "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
# }

###

### ========================================
### NFC ENDPOINTS
### ========================================

### Post NFC Data - Crea o actualiza datos NFC
POST {{baseUrl}}/nfc/data
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "nfcTagId": "123e4567-e89b-12d3-a456-426614174000",
  "serialNumber": "NFC001234567890",
  "contactInfo": [
    {
      "type": "tutor",
      "name": "María García",
      "phone": "+34612345678",
      "email": "maria.garcia@colegio.edu",
      "company": "Colegio San José",
      "position": "Tutora de 5º Primaria"
    },
    {
      "type": "father",
      "name": "Carlos Pérez",
      "phone": "+34698765432",
      "email": "carlos.perez@gmail.com"
    }
  ]
}

# Respuesta esperada:
# {
#   "message": "NFC data saved successfully"
# }

# Nota: 
# - Para CREAR un nuevo NFC, envía un UUID v4 nuevo
# - Para ACTUALIZAR un NFC existente, envía el UUID del NFC existente
# - El userId se obtiene automáticamente del token JWT

###

### Get NFC Tag by ID - Requiere autenticación JWT
GET {{baseUrl}}/nfc/tag/123e4567-e89b-12d3-a456-426614174000
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

# Respuesta esperada:
# {
#   "data": {
#     "id": "123e4567-e89b-12d3-a456-426614174000",
#     "userId": "123e4567-e89b-12d3-a456-426614174000",
#     "serialNumber": "NFC001234567890",
#     "nfcData": {
#       "contactInfo": [
#         {
#           "type": "tutor",
#           "name": "María García",
#           "phone": "+34612345678",
#           "email": "maria.garcia@colegio.edu",
#           "company": "Colegio San José",
#           "position": "Tutora de 5º Primaria"
#         }
#       ]
#     },
#     "isActive": true,
#     "createdAt": "2024-01-01T10:00:00.000Z",
#     "updatedAt": "2024-01-01T10:00:00.000Z"
#   }
# }

###

### Get NFC Tags by User ID - Requiere autenticación JWT
GET {{baseUrl}}/nfc/tags/user
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

# Respuesta esperada:
# {
#   "nfcTags": [
#     {
#       "id": "123e4567-e89b-12d3-a456-426614174000",
#       "serialNumber": "NFC001234567890"
#     },
#     {
#       "id": "456e7890-e89b-12d3-a456-426614174001",
#       "serialNumber": "NFC987654321"
#     }
#   ]
# }

###

### Get Public NFC Tag (JSON) - No requiere autenticación
GET {{baseUrl}}/nfc/public/NFC001234567890
Content-Type: {{contentType}}

# Respuesta esperada (JSON):
# {
#   "serialNumber": "NFC001234567890",
#   "contactInfo": [
#     {
#       "type": "tutor",
#       "name": "María García",
#       "phone": "+34612345678",
#       "email": "maria.garcia@colegio.edu",
#       "company": "Colegio San José",
#       "position": "Tutora de 5º Primaria"
#     },
#     {
#       "type": "father",
#       "name": "Carlos Pérez",
#       "phone": "+34698765432",
#       "email": "carlos.perez@gmail.com"
#     }
#   ]
# }

###

### Get Public NFC Tag (HTML) - No requiere autenticación
GET {{baseUrl}}/nfc/contact/NFC001234567890

# Respuesta esperada (HTML):
# Página HTML responsive con información de contacto
# Optimizada para escaneo directo desde móviles
# Incluye enlaces directos para llamar y enviar emails

###

### Post NFC Data - Ejemplo con un solo contacto
POST {{baseUrl}}/nfc/data
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "nfcTagId": "456e7890-e89b-12d3-a456-426614174001",
  "serialNumber": "NFC987654321",
  "contactInfo": [
    {
      "type": "mother",
      "name": "Ana López",
      "phone": "+34600123456",
      "email": "ana.lopez@gmail.com",
      "company": "Freelance",
      "position": "Diseñadora Gráfica"
    }
  ]
}

###

### ========================================
### NOTAS DE USO
### ========================================

# 1. Primero ejecuta el endpoint de registro para obtener los tokens
# 2. Copia el accessToken de la respuesta
# 3. Reemplaza la variable @accessToken al inicio del archivo
# 4. Ahora puedes usar los endpoints de NFC que requieren autenticación
# 
# Configuración de tokens:
# - Access Token: válido por 24 horas
# - Refresh Token: válido por 30 días
#
# Tipos de contacto disponibles:
# - "tutor": Tutor
# - "father": Padre  
# - "mother": Madre
# - "other": Otro
#
# NFC Tag ID:
# - Debe ser un UUID v4 válido
# - Para crear: genera un nuevo UUID v4
# - Para actualizar: usa el UUID del NFC existente
#
# Endpoints públicos (no requieren autenticación):
# - GET /nfc/public/{serialNumber} → Devuelve JSON (para APIs)
# - GET /nfc/contact/{serialNumber} → Devuelve HTML (para escaneo móvil)
